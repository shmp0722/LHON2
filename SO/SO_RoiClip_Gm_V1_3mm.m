%% SO_V1RoiCleanClip.m
%  clean and clip V1 ROI
%% Set directory
% homeDir
homeDir = '/biac4/wandell/biac2/wandell/data/DWI-Tamagawa-Japan';

% subs in colum
subJ = {...
    'JMD1-MM-20121025-DWI'...
    'JMD2-KK-20121025-DWI'...
    'JMD3-AK-20121026-DWI'...
    'JMD4-AM-20121026-DWI'...
    'JMD5-KK-20121220-DWI'...
    'JMD6-NO-20121220-DWI'...
    'JMD7-YN-20130621-DWI'...
    'JMD8-HT-20130621-DWI'...
    'JMD9-TY-20130621-DWI'...
    'LHON1-TK-20121130-DWI'...
    'LHON2-SO-20121130-DWI'...
    'LHON3-TO-20121130-DWI'...
    'LHON4-GK-20121130-DWI'...
    'LHON5-HS-20121220-DWI'...
    'LHON6-SS-20121221-DWI'...
    'JMD-Ctl-MT-20121025-DWI'...
    'JMD-Ctl-YM-20121025-DWI'...
    'JMD-Ctl-SY-20130222DWI'...
    'JMD-Ctl-HH-20120907DWI'...
    'JMD-Ctl-HT-20120907-DWI'...
    'JMD-Ctl-FN-20130621-DWI'...
    'JMD-Ctl-AM-20130726-DWI'};

%  loop subject
for i = 22:length(subJ)
%     dt= fullfile(AFQdata,subs{i},'/dwi_2nd','dt6.mat');
%     fgDir  = fullfile(AFQdata,subs{i},'/dwi_2nd/fibers');
    RoiDir = fullfile(homeDir,subJ{i},'/dwi_2nd/ROIs');
    roi1F = {'lh_V1_smooth3mm_NOT.mat','rh_V1_smooth3mm_NOT.mat'};
    roi2F = {'Left-Cerebral-Cortex.mat','Right-Cerebral-Cortex.mat'};
    
    for k = 1:length(roi1F)
    % load Roi
    cd(RoiDir)
    roi1 = dtiReadRoi(roi1F{k});
    roi2 = dtiReadRoi(roi2F{k});
    
    [roi2.coords, ia] = setdiff(roi2.coords, roi1.coords, 'rows');
    roi2.name = [roi2.name '_' roi1.name];
    dtiWriteRoi(roi2,roi2.name)
    end
end
