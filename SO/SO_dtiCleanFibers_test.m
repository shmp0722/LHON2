% SO_dtiCleanFibers_test.m
% fg = dtiCleanFibers(fg, clipPlanes, maxLen, minLen)
%
% removes fibers that cross the mid-sagittal plane more than once. Can also
% remove any fibers that penetrate the clip planes (a 1x3 set of L-R, A-P,
% S-I coordinates that define the 3 planes- set a coord to NaN to not clip
% in that plane).
%
%
% HISTORY:
%  2005.01.27 RFD wrote it.


AFQdata = '/biac4/wandell/biac2/wandell/data/DWI-Tamagawa-Japan';

subs = {...
    'JMD1-MM-20121025-DWI'...
    'JMD2-KK-20121025-DWI'...
    'JMD3-AK-20121026-DWI'...
    'JMD4-AM-20121026-DWI'...
    'JMD5-KK-20121220-DWI'...
    'JMD6-NO-20121220-DWI'...
    'LHON1-TK-20121130-DWI'...
    'LHON2-SO-20121130-DWI'...
    'LHON3-TO-20121130-DWI'...
    'LHON4-GK-20121130-DWI'...
    'LHON5-HS-20121220-DWI'...
    'LHON6-SS-20121221-DWI'...
    'JMD-Ctl-MT-20121025-DWI'...
    'JMD-Ctl-YM-20121025-DWI'...
    'JMD-Ctl-SY-20130222DWI'...
    'JMD-Ctl-HH-20120907DWI'...
    'JMD-Ctl-HT-20120907-DWI'...
    };
i = 1;%:length(subs);
dt= fullfile(AFQdata,subs{i},'/dwi_2nd','dt6.mat');
%     LOR_FG = afq.files.fibers.wholebrain{i};
    fgDir = fullfile(AFQdata,subs{i},'/dwi_2nd/fibers/conTrack/OR_Top100K_fs2ROIV1_3mm');
    LOR_FG ='fg_OR_Top100K_fs2ROIV1_3mm_Lt-LGN_lh_V1_smooth3mm_2013-06-05_01.07.38.pdb';
    cd(fgDir)
    
     if ischar(dt)
        dt = dtiLoadDt6(dt);
    end
    if ischar(LOR_FG)
        LOR_FG = fgRead(LOR_FG);
    end
    
    fg=dtiSplitInterhemisphericFibers(fg, dt, -10]);